{"version":3,"file":"commonHelpers.js","sources":["../src/js/refs.js","../src/js/spinner.js","../src/js/searchImages.js","../src/js/createMarkUp.js","../src/js/hasMoreData.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const imgContainer = document.querySelector('.img-container');\nexport const BASE_URL = 'https://pixabay.com/api/';\nexport const API_KEY = '41741201-12a642cf53882fe64e8e82723';\nexport const formEl = document.querySelector('.search-form');\nexport const loadMoreBtn = document.querySelector('.js-load-more');\nexport const lightbox = new SimpleLightbox('.lightbox-link');","import { Spinner } from 'spin.js';\nconst spinnerContainer = document.querySelector('.js-backdrop');\n\nconst opts = {\n  lines: 8, // The number of lines to draw\n  length: 33, // The length of each line\n  width: 4, // The line thickness\n  radius: 26, // The radius of the inner circle\n  scale: 0.6, // Scales overall size of the spinner\n  corners: 0.5, // Corner roundness (0..1)\n  speed: 1.6, // Rounds per second\n  rotate: 0, // The rotation offset\n  animation: 'spinner-line-fade-quick', // The CSS animation name for the lines\n  direction: 1, // 1: clockwise, -1: counterclockwise\n  color: '#ffffff', // CSS color or array of colors\n  fadeColor: 'transparent', // CSS color or array of colors\n  top: '49%', // Top position relative to parent\n  left: '50%', // Left position relative to parent\n  shadow: '0 0 1px transparent', // Box-shadow for the lines\n  zIndex: 2000000000, // The z-index (defaults to 2e9)\n  className: 'spinner', // The CSS class to assign to the spinner\n  position: 'absolute', // Element positioning\n};\n\nconst spinner = new Spinner(opts);\n\nexport const spinnerPlay = () => {\n  spinnerContainer.classList.remove('is-hidden');\n  spinner.spin(spinnerContainer);\n};\n\nexport const spinnerStop = () => {\n  spinnerContainer.classList.add('is-hidden');\n  spinner.stop();\n};\n","import { BASE_URL, API_KEY } from './refs';\nimport iziToast from 'izitoast';\nimport axios from 'axios';\n\nexport const searchImages = async (q, page = 1, perPage = 40) => {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        perPage\n      },\n    });\n\n    if (response.data.total === 0&& page === 1) {\n      imgContainer.innerHTML = '';\n      iziToast.info({\n        position: 'center',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    }\n\n    return response.data;\n  } catch (error) {\n    console.error('Error during image search:', error);\n    throw new Error('Failed to retrieve images');\n  }\n};","export const createMarkUp = array => {\n  return array.map(\n    image => `<div class=\"img-item\">\n      <a href=\"${image.webformatURL}\" class=\"lightbox-link\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n      </a>\n      <div class=\"image-info\">\n        <p>Likes: ${image.likes}</p>\n        <p>Views: ${image.views}</p>\n        <p>Comments: ${image.comments}</p>\n        <p>Downloads: ${image.downloads}</p>\n      </div>\n    </div>`\n  ).join('');\n};\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { loadMoreBtn } from './refs';\n\nexport const hasMoreData = (lastPage, page) => {\n  if (page < lastPage) {\n    loadMoreBtn.classList.remove('is-hidden');\n  } else {\n    iziToast.info({\n      position: 'topRight',\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n    loadMoreBtn.classList.add('is-hidden');\n  }\n};","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { lightbox } from './js/refs';\nimport { spinnerPlay, spinnerStop } from './js/spinner';\nimport { imgContainer, formEl, loadMoreBtn } from './js/refs';\nimport { searchImages } from './js/searchImages';\nimport { createMarkUp } from './js/createMarkUp';\nimport { hasMoreData } from './js/hasMoreData';\n\nlet currentPage = 1;\n\nconst handleSubmit = async event => {\n  event.preventDefault();\n  spinnerPlay();\n\n  const searchQuery = event.currentTarget.elements.query.value.trim();\n\n  if (searchQuery !== '') {\n    try {\n      const data = await searchImages(searchQuery, 1);\n      imgContainer.insertAdjacentHTML('beforeend', createMarkUp(data.hits));\n\n      lightbox.refresh();\n      hasMoreData(data.totalHits, currentPage);\n    } catch (error) {\n      iziToast.error({\n        position: 'center',\n        message:\n          'An error occurred while retrieving images. Please try again later.',\n      });\n      console.error('Error during search:', error);\n    } finally {\n      spinnerStop();\n    }\n  } else {\n    spinnerStop();\n    iziToast.warning({\n      position: 'center',\n      message: 'Please enter a search query.',\n    });\n  }\n};\n\nconst handleMoreData = async () => {\n  spinnerPlay();\n\n  try {\n    const searchQuery = formEl.elements.query.value.trim();\n    const { hits, totalHits } = await searchImages(\n      searchQuery,\n      currentPage + 1\n    );\n\n    imgContainer.insertAdjacentHTML('beforeend', createMarkUp(hits));\n    hasMoreData(totalHits, currentPage + 1);\n    currentPage++;\n\n    const cardHeight =\n      imgContainer.lastElementChild.getBoundingClientRect().height;\n      console.log(cardHeight);\n    window.scrollBy({\n      top: cardHeight * 5,\n      behavior: 'smooth',\n    });\n  } catch (error) {\n    console.error(error);\n  } finally {\n    spinnerStop();\n  }\n};\n\nformEl.addEventListener('submit', handleSubmit);\nloadMoreBtn.addEventListener('click', handleMoreData);\n"],"names":["imgContainer","BASE_URL","API_KEY","formEl","loadMoreBtn","lightbox","SimpleLightbox","spinnerContainer","opts","spinner","Spinner","spinnerPlay","spinnerStop","searchImages","q","page","perPage","response","axios","iziToast","error","createMarkUp","array","image","hasMoreData","lastPage","currentPage","handleSubmit","event","searchQuery","data","handleMoreData","hits","totalHits","cardHeight"],"mappings":"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"}